!function(){"use strict";const e="Tag Manager: ",t=function(){let e=!1;try{const t=window;e=t&&t.debug||t.location&&(t.location.search||"").toLowerCase().indexOf("debug=")>-1}catch(e){}return e}();function n(n){t&&console&&console.error(e+" "+n)}function o(e){let t=e;try{t=JSON.parse(e)}catch(e){n("Parse error in string"),n(e.message)}return t}function i(e,t){return e&&"true"===e[t]}const r="_api/tag-manager/api/v1/tags/sites/",a=[".wix.com",".editorx.com"],c="22bef345-3c5b-4c18-b782-74d4085112ff",d="specs.tagManagerRenderTagByPageID",s="specs.tagManager.ReadLoadOnceFromTag";let u=[];const l=[],g=[],f=[];let m=[],p={};function w(){return f}function E(){return A(p)}function h(e){return Object.keys(e).filter((t=>!!e[t]&&-1===m.indexOf(t)))}function y(e){l.push(e)}function b(e){g.push(e)}function A(e){return o(JSON.stringify(e))}const T=!!document.documentMode;function I(e,t,n){let o;T?(o=document.createEvent("CustomEvent"),o.initCustomEvent(e,!0,!0,n)):o=new CustomEvent(e,{detail:n}),t&&t.dispatchEvent&&setTimeout((()=>{t.dispatchEvent(o)}),0)}const x={TAG_MANAGER_LOADED:"TagManagerLoaded",TAGS_LOADING:"LoadingTags",TAG_LOADED:"TagLoaded",TAG_LOAD_ERROR:"TagLoadError"};function P(e,t,o){const i=()=>{try{if("function"==typeof e)return e(t)}catch(e){n(e)}};return!0===o?setTimeout(i,0):i()}function O(e,t,n,o){return()=>{I(e,window,{tagName:t,embed:n}),o(n),function(e){u=u.filter((t=>t.name!==e))}(n.name)}}function v(e,t){let n;return e.nodeType===Node.TEXT_NODE?n=document.createTextNode(e.content):e.nodeType===Node.COMMENT_NODE?n=document.createComment(e.content):(n=document.createElement(e.tag),e&&e.attributes instanceof NamedNodeMap?Array.prototype.forEach.call(e.attributes,(e=>{N(n,e.name,e.value)})):"object"==typeof e.attributes&&Object.keys(e.attributes).forEach((t=>{void 0!==typeof e.attributes[t]&&N(n,t,e.attributes[t])})),"SCRIPT"===e.tag?function(e,t,n){void 0===t&&(t=""),t&&(e.src=function(e){const t=new Blob([e],{type:"text/javascript;charset=utf-8"});return URL.createObjectURL(t)}(t)),e.addEventListener("load",(()=>{P(n&&n.onload,null)}),!1),e.addEventListener("error",(()=>{P(n&&n.onerror,null)}),!1)}(n,e.content,t):e.children&&e.children.length>0&&e.children.forEach((e=>{const o=v(e,t);n.appendChild(o)}))),n}function N(e,t,n){e.setAttribute(t,n)}function L(e){const t=[],n=document.createElement("DIV");return n.innerHTML=e,Array.prototype.forEach.call(n.childNodes,(e=>{const n=C(e);t.push(n)})),t}function C(e){const t=e.nodeType,n=e.innerHTML||e.textContent||e.nodeValue,o=[];return e.hasChildNodes()&&Array.prototype.forEach.call(e.childNodes,(e=>{o.push(C(e))})),{nodeType:t,tag:e.nodeName,attributes:e.attributes,content:n,children:o}}let D=function(e){return e.HEAD="head",e.BODY_START="bodyStart",e.BODY_END="bodyEnd",e}({});const M=e=>!e.id,R=e=>{var t,n;return!(null!=(t=e.tag)&&null!=(n=t.pages)&&n.length)},S=(e,t)=>{var n,o;return(null==(n=e.tag)||null==(o=n.pages)?void 0:o.includes(t.id||""))||!1};function _(e,t,n){const o=e.filter((e=>!e.embeddedNodes)),r=i(n,d)?function(e,t){return e.filter((e=>function(e,t){return M(t)||R(e)||S(e,t)}(e,t)))}(o,t):o,a=r.map((e=>e.tag));(function(e){u=e})(a),I(x.TAGS_LOADING,window,a),r.forEach((e=>{const t=e.tag,n=L(t.content),o=t.position&&t.position!==D.HEAD?document.body:document.head,i=function(e,t,n,o){const i=[];let r=0;const a=()=>{r-=1,r>=0&&P(t.onload,{})},c=()=>{r-=1,r>=0&&P(t.onerror,{error:!0})},d=n.firstChild;return e.forEach((e=>{"SCRIPT"===e.tag&&(r+=1);const t=v(e,{onload:a,onerror:c});i.push(t),o?n.insertBefore(t,d):n.appendChild(t)})),0===r&&P(t.onload,{},!0),i}(n,{onload:O(x.TAG_LOADED,t.name,t,y),onerror:O(x.TAG_LOAD_ERROR,t.name,t,b)},o,t.position===D.BODY_START);e.embeddedNodes=i}))}function G(e,t){const r=o(e),{currentPageID:a,initConsentPolicyManager:c=!1}=t;var d,u,l,g;if(r.errors&&r.errors.length>0&&n(JSON.stringify(r.errors)),r.config&&((u=r.config.consentPolicy)&&"object"==typeof u&&(m=[...m,...h(u)]),c&&window.consentPolicyManager&&window.consentPolicyManager.init({consentPolicy:r.config.consentPolicy}),"object"!=typeof(d=r.config)||Array.isArray(d)||(p={...p,...d})),r.tags){l=r.tags,i(null==(g=p)?void 0:g.experiments,s)?l.forEach((e=>{var t;const n=e.loadOnce||(null==(t=e.content)?void 0:t.includes('load-once="true"'));f.push({tag:{...e,loadOnce:n},embeddedNodes:null})})):l.forEach((e=>{f.push({tag:e,embeddedNodes:null})}));const e={id:a};_(w(),e,r.config.experiments)}}const j=()=>"partytown"in window;function B(e,t,n){return(e&&!function(e){let t=!1;return a.forEach((e=>{t||(t=location.hostname.indexOf(e)>0)})),t||e}(!!n)?e:"")+"/"+r+t}function U(e){const{metasiteId:t,htmlsiteId:o,baseUrl:i,wixSite:r,language:a,categories:d}=e,s=B(i,t,r),u=!r&&window.consentPolicyManager?window.consentPolicyManager._getConsentPolicyHeader():{},l=function(e){return e.wixEmbedsAPI.getCurrentPageInfo&&"function"==typeof e.wixEmbedsAPI.getCurrentPageInfo&&e.wixEmbedsAPI.getCurrentPageInfo()||{}}(window),g=function(e,t){void 0===t&&(t=location.search);let n=t.split("omit=")[1];return n=n?decodeURIComponent(n.split("&")[0]):void 0,n}(),f=window.wixEmbedsAPI.getAppToken;f&&(u.authorization=P(f,c)),function(e,t,n,o){const i=o&&o.headers||{},r=o&&o.query||{};i["content-type"]=i["content-type"]||"application/json";const a=new XMLHttpRequest,c=o&&o.postBody?"POST":"GET",d=""+e+function(e){let t="";return"object"==typeof e&&Object.keys(e).forEach((n=>{if(void 0!==e[n]){const o=encodeURIComponent(e[n]);t+=encodeURIComponent(n)+"="+o+"&"}})),t=t?t.substr(0,t.length-1):"",t?"?"+t:""}(r);a.open(c,d,!0),a.onreadystatechange=()=>{if(4===a.readyState){const e=a.status;e<200||e>=300?P(n,{status:e,responseText:a.responseText}):P(t,a.responseText)}},Object.keys(i).forEach((e=>{void 0!==i[e]&&a.setRequestHeader(e,i[e])})),a.send(o&&o.postBody||null)}(s,(e=>{G(e,{initConsentPolicyManager:!d&&!!r,currentPageID:l.id})}),(e=>{n("Error loading site tags at "+s),n(e.message)}),{query:{wixSite:!!r,htmlsiteId:o,language:a,categories:d,omit:g,partytown:j()},headers:u})}function H(e){w().forEach((e=>{e.tag.loadOnce||(e.embeddedNodes&&e.embeddedNodes.forEach((e=>{P((()=>{e.parentNode.removeChild(e)}))})),e.embeddedNodes=null)})),_(w(),e,E().experiments)}function k(e){if(e&&e.detail&&e.detail.policy){const t=h(e.detail.policy);t.length&&U({baseUrl:window.wixEmbedsAPI.getExternalBaseUrl(),htmlsiteId:window.wixEmbedsAPI.getHtmlSiteId(),metasiteId:window.wixEmbedsAPI.getMetaSiteId(),wixSite:window.wixEmbedsAPI.isWixSite(),language:window.wixEmbedsAPI.getLanguage(),categories:t})}}const q={getLoadedTags:function(){return A(l)},getLoadingTags:function(){return A(u)},getLoadErrorTags:function(){return A(g)},getConfig:E};let J=()=>{const e=window.wixEmbedsAPI;U({baseUrl:e.getExternalBaseUrl(),htmlsiteId:e.getHtmlSiteId(),metasiteId:e.getMetaSiteId(),language:e.getLanguage(),wixSite:e.isWixSite()}),window.wixEmbedsAPI.registerToEvent("pageNavigation",H),document.addEventListener("consentPolicyChanged",k),window.wixTagManager=q,I(x.TAG_MANAGER_LOADED,window,q)};window.wixEmbedsAPI&&"function"==typeof window.wixEmbedsAPI.registerToEvent?J():window.addEventListener("wixEmbedsAPIReady",(()=>{J(),J=function(){}}),!1)}();